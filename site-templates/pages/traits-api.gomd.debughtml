<h1>Traits: API for elements traits</h1>

<h2>What are Traits?</h2>
<p>Traits are a new feature that allows to associate metadata to objects within a workspace via a REST API, they are open-ended metadata for workspace objects. For example, if you upload assets (images, documents, etc.) that belong to a specific project, you can add that project information as Traits to each asset in the workspace. Later, you could download those assets and the data in the Traits of each asset will let you know the original project data.</p>

<h2>Highlights of Traits</h2>

<pre><code>&lt;p&gt;Important points regarding Traits:
    &lt;ul&gt;
        &lt;li&gt;Traits are always represented as a JSON array.&lt;/li&gt;
        &lt;li&gt;Unlike Bluescape comments, traits can be specified on object creation.&lt;/li&gt;
        &lt;li&gt;Any number of traits can be associated with a workspace object, forming an ordered list.&lt;/li&gt;
        &lt;li&gt;Similarly to Bluescape comments, traits are append-only, i.e., traits can only grow monotonically over time, &lt;b&gt;they cannot be deleted&lt;/b&gt;.&lt;/li&gt;
    &lt;/ul&gt;

&lt;/p&gt;


&lt;h3&gt;To what elements can I associate a Trait?&lt;/h3&gt;
&lt;p&gt;
        Traits may be associated with the following workspace elements (object_type):
        &lt;ul&gt;
            &lt;li&gt;Notes&lt;/li&gt;
            &lt;li&gt;Canvas&lt;/li&gt;
            &lt;li&gt;Browsers&lt;/li&gt;
            &lt;li&gt;Documents&lt;/li&gt;
            &lt;li&gt;Images&lt;/li&gt;
            &lt;li&gt;Strokes&lt;/li&gt;
            &lt;li&gt;Text&lt;/li&gt;
        &lt;/ul&gt;
        &lt;/p&gt;
        &lt;p&gt;
        Traits may be associated with a workspace element upon its creation, or at a later time, until the deletion of the element. The following element types currently support trait association upon element creation:
        &lt;ul&gt;
            &lt;li&gt;Notes&lt;/li&gt;
            &lt;li&gt;Canvas&lt;/li&gt;
            &lt;li&gt;Browsers&lt;/li&gt;
            &lt;li&gt;Strokes&lt;/li&gt;
            &lt;li&gt;Text&lt;/li&gt;
        &lt;/ul&gt;
        &lt;/p&gt;

&lt;h3&gt;Trait structure&lt;/h3&gt;
&lt;p&gt;
        In every request and response of the Bluescape REST API operating on elements of the supported types, traits are represented as a JSON array. Each item in the array must conform to the JSON-LD specification (&lt;a href=&quot;https://json-ld.org/&quot; target=&quot;_blank&quot;&gt;https://json-ld.org/&lt;/a&gt;). While the JSON-LD specification contains a rich set of features for data modeling, their use not necessary. The only relevant constraint imposed by the JSON-LD specification is that every JSON property name must either:
        &lt;ul&gt;
            &lt;li&gt;be a Uniform Resource Locator (URI)&lt;/li&gt;
            &lt;li&gt;be a JSON-LD keyword - one of 13 reserved names starting with the &quot;@&quot; symbol&lt;/li&gt;
            &lt;li&gt;resolve to a URI, as directed by the &quot;@context&quot; keyword&lt;/li&gt;
        &lt;/ul&gt;
    &lt;br /&gt;
    &lt;b&gt;IMPORTANT&lt;/b&gt;: If traits do not conform to this structure, traits API calls will produce HTTP error response &lt;span
    class=&quot;pre&quot;&gt;400 Bad Request&lt;/span&gt;.
    &lt;br /&gt;
    &lt;br /&gt;
    API clients are encouraged to choose the HTTP URI schema to reduce the possibility of inadvertent namespace collisions, and use a base URI derived from the DNS name of their organization, thus enabling multiple organizations to cooperatively share the traits namespace. For instance, the traits specified above can be augmented by another organization. See example below:
&lt;/p&gt;
&lt;p&gt;
    Example of the data load: 
</code></pre>

<p><pre>
    {
        // trait from framework A
        "<a href="http://acme.com/file-data/name&quot;:">http://acme.com/file-data/name":</a>  “background-test-1.jpg”,
        "<a href="http://acme.com/file-data/version&quot;:">http://acme.com/file-data/version":</a> "1.0.4-First-review"
    },
    { // trait from framework B
        "<a href="http://ajax.com/project/&quot;:">http://ajax.com/project/":</a> {
            "<a href="http://ajax.com/project/owner&quot;:">http://ajax.com/project/owner":</a> "Joe Smith",
            "<a href="http://ajax.com/project/deadline&quot;:">http://ajax.com/project/deadline":</a> "2019Q4"
        },
        "<a href="http://ajax.com/project/name&quot;:">http://ajax.com/project/name":</a> "Lorem Ipsum, the Return"
    }
</pre>
    </p></p>

<h2>How to implement Traits?</h2>

<h3>Add Traits when creating an element</h3>

<pre><code>&lt;p&gt;
   As mentioned above, you can add Traits to an element at the creation moment if the element is one of the following ones:
    &lt;ul&gt;
            &lt;li&gt;Notes&lt;/li&gt;
            &lt;li&gt;Canvas&lt;/li&gt;
            &lt;li&gt;Browsers&lt;/li&gt;
            &lt;li&gt;Strokes&lt;/li&gt;
            &lt;li&gt;Text&lt;/li&gt;
        &lt;/ul&gt;

&lt;/p&gt;
&lt;p&gt;
    You will need to add the JSON Array as a &lt;span
    class=&quot;pre&quot;&gt;'traits'&lt;/span&gt; field in the data load. For example, when craeting a Canvas, you can add Traits as in the example below:
</code></pre>

<p><pre>
...
data_load = {
    'x': 10000,
    'y': 1000,
    'width': 4000,
    'height': 4000,
    'name': "New Canvas - Creation time: " + str(timestamp),
    'borderColor': 'Yellow',
    'traits' : [{"<a href="http://acme.com/project&quot;:">http://acme.com/project":</a> "Lorem Ipsum, The Return"},{"<a href="http://acme.com/project/review&quot;">http://acme.com/project/review"</a> : "First Review, gathering Feedback"}]
}
...
</pre>
    </p></p>

<h3>Add Traits to an existing element</h3>
    <p>

        <table class="table table-striped">
                <tr>
                  <td><b>Endpoint</b></td>
                  <td>/v2/workspaces/&lt;workspace_uid&gt;/elements/&lt;object_type&gt;/&lt;object_id&gt;/traits</td>
                </tr>
                <tr>
                    <td><b>Method</b></td>
                    <td>POST</td>
                </tr>
                <tr>
                  <td><b>Comments</b></td>
                  <td>If traits do not conform to the specified structure, Traits API calls will produce HTTP error response <span
                    class="pre">400 Bad Request</span>.</td>
                </tr>
        </table>
        <br />
    
        When adding Traits to an object, you will need to provide a JSON Array as the data load for the API. An example of the data load for adding Traits to an image object would be:
<pre>
data_load = [{
    "http://acme.com/picture/title": "Sand dunes picture",
    "http://acme.com/picture/description": "Sand Dunes, big, light on one side, shadow on the other side",
    "http://acme.com/picture/tags": ["sand dunes","light","desert","blue sky","yellow sand","sand"]
    }]
</pre>
    </p>

    
<h3>Get a list of the Traits in an object</h3>
<p>
        <table class="table table-striped">
                <tr>
                  <td><b>Endpoint</b></td>
                  <td>/v2/workspaces/&lt;workspace_uid&gt;/elements/&lt;object_type&gt;/&lt;object_id&gt;/traits</td>
                </tr>
                <tr>
                    <td><b>Method</b></td>
                    <td>GET</td>
                </tr>
                <tr>
                  <td><b>Comments</b></td>
                  <td></td>
                </tr>
        </table>


    </p>


<h3>Cannot Delete/Edit Traits: alternative</h3>
   

<p>       
        As previously mentioned, the traits of an element are never deleted during its lifetime, and all the traits association is cumulative. However, the API client is free to interpret cumulative traits associations as updates or deletions. For instance, another traits association may result in the traits array becoming this:
<pre>
[{ "http://acme.com/bluescape#assetId": "869C287E-59BB-4319-9261-F791F659C54A" },
    { "http://ajax.com/bscp#assetId": "98d03812452e0b6cabdbde5eff14e89f" },
    { "http://acme.com/bluescape#assetId": null }]
</pre>
    <br />
        The API client using the "http://acme.com" prefix is free to interpret such association as a deletion of the assetId property of the associated <span class="pre">bluescape#assetId</span> element by processing the values from older to newer (top to bottom in this example).
</p>  

<p><p></p>

<p></p>
<br />
If you have any questions or comments, please contact us at <a href="https://support.bluescape.com" target="_blank">Bluescape support</a>.</p>
